{
  "name": "Customer Reactivation System",
  "nodes": [
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "cronExpression",
              "expression": "0 10 * * 1"
            }
          ]
        }
      },
      "id": "cron-weekly",
      "name": "Every Monday 10am",
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.1,
      "position": [250, 300]
    },
    {
      "parameters": {
        "operation": "list",
        "application": {
          "__rl": true,
          "value": "={{$env.AIRTABLE_BASE_ID}}",
          "mode": "id"
        },
        "table": {
          "__rl": true,
          "value": "Customers",
          "mode": "list"
        },
        "options": {
          "filterByFormula": "AND(DATETIME_DIFF(NOW(), {Last Visit}, 'days') >= 60, DATETIME_DIFF(NOW(), {Last Visit}, 'days') <= 90, {Reactivation Sent} = FALSE())"
        }
      },
      "id": "airtable-get-inactive",
      "name": "Get 60-90 Day Inactive",
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2,
      "position": [450, 300]
    },
    {
      "parameters": {
        "jsCode": "// Personalize based on visit history\nconst items = $input.all();\nconst personalized = [];\n\nfor (const item of items) {\n  const json = item.json;\n  const visitCount = json['Visit Count'] || 0;\n  const daysSince = Math.floor((Date.now() - new Date(json['Last Visit']).getTime()) / (1000 * 60 * 60 * 24));\n  \n  let greeting = 'Hey';\n  let personalNote = \"We haven't seen you in a while!\";\n  let offer = '20% off';\n  \n  if (visitCount >= 10) {\n    greeting = 'Hi friend';\n    personalNote = \"You're one of our VIPs and we miss you!\";\n    offer = '25% off';\n  } else if (visitCount >= 5) {\n    greeting = 'Hey there';\n    personalNote = \"It's been too long!\";\n    offer = '20% off';\n  }\n  \n  personalized.push({\n    json: {\n      ...json,\n      greeting,\n      personalNote,\n      offer,\n      daysSince\n    }\n  });\n}\n\nreturn personalized;"
      },
      "id": "personalization-engine",
      "name": "Personalize Message",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [650, 300]
    },
    {
      "parameters": {
        "accountSid": "={{ $credentials.accountSid }}",
        "fromPhoneNumber": "={{$env.BUSINESS_PHONE}}",
        "toPhoneNumber": "={{ $json.Phone }}",
        "message": "={{$json.greeting}} {{ $json.Name }}! ðŸ’š\n\n{{$json.personalNote}} It's been {{$json.daysSince}} days since we saw you at {{$env.BUSINESS_NAME}}.\n\nWe'd love to have you back!\n\nðŸŽ Special welcome back offer: {{$json.offer}} your next visit if you book this week!\n\nReply BOOK or call {{$env.BUSINESS_PHONE}}\n\nHope you're doing well!\n\n- {{$env.OWNER_NAME}}",
        "options": {}
      },
      "id": "sms-reactivation",
      "name": "Send Reactivation Message",
      "type": "n8n-nodes-base.twilio",
      "typeVersion": 1,
      "position": [850, 300]
    },
    {
      "parameters": {
        "operation": "update",
        "application": {
          "__rl": true,
          "value": "={{$env.AIRTABLE_BASE_ID}}",
          "mode": "id"
        },
        "table": {
          "__rl": true,
          "value": "Customers",
          "mode": "list"
        },
        "id": "={{ $json.id }}",
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Reactivation Sent": "=true",
            "Reactivation Date": "={{ $now }}",
            "Status": "Reactivation Campaign"
          }
        },
        "options": {}
      },
      "id": "airtable-mark-sent",
      "name": "Mark Reactivation Sent",
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2,
      "position": [1050, 300]
    },
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "cronExpression",
              "expression": "0 10 * * 1"
            }
          ]
        }
      },
      "id": "cron-follow-up",
      "name": "Weekly - Check for Responses",
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.1,
      "position": [250, 550]
    },
    {
      "parameters": {
        "operation": "list",
        "application": {
          "__rl": true,
          "value": "={{$env.AIRTABLE_BASE_ID}}",
          "mode": "id"
        },
        "table": {
          "__rl": true,
          "value": "Customers",
          "mode": "list"
        },
        "options": {
          "filterByFormula": "AND({Status} = 'Reactivation Campaign', DATETIME_DIFF(NOW(), {Reactivation Date}, 'days') >= 7, DATETIME_DIFF(NOW(), {Reactivation Date}, 'days') <= 10, {Reactivation Follow-Up} = FALSE())"
        }
      },
      "id": "airtable-follow-up-needed",
      "name": "Get No-Response (7 days)",
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2,
      "position": [450, 550]
    },
    {
      "parameters": {
        "accountSid": "={{ $credentials.accountSid }}",
        "fromPhoneNumber": "={{$env.BUSINESS_PHONE}}",
        "toPhoneNumber": "={{ $json.Phone }}",
        "message": "=Hey {{ $json.Name }}! ðŸ‘‹\n\nJust wanted to make sure you saw our message last week!\n\nThe {{$json.offer}} offer is still available if you book this week.\n\nOr if the timing just isn't right, no worries - we'll be here when you're ready! ðŸ’š\n\n- {{$env.OWNER_NAME}}",
        "options": {}
      },
      "id": "sms-follow-up",
      "name": "Send Follow-Up",
      "type": "n8n-nodes-base.twilio",
      "typeVersion": 1,
      "position": [650, 550]
    },
    {
      "parameters": {
        "operation": "update",
        "application": {
          "__rl": true,
          "value": "={{$env.AIRTABLE_BASE_ID}}",
          "mode": "id"
        },
        "table": {
          "__rl": true,
          "value": "Customers",
          "mode": "list"
        },
        "id": "={{ $json.id }}",
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Reactivation Follow-Up": "=true"
          }
        },
        "options": {}
      },
      "id": "airtable-mark-follow-up",
      "name": "Mark Follow-Up Sent",
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2,
      "position": [850, 550]
    }
  ],
  "connections": {
    "Every Monday 10am": {
      "main": [
        [
          {
            "node": "Get 60-90 Day Inactive",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get 60-90 Day Inactive": {
      "main": [
        [
          {
            "node": "Personalize Message",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Personalize Message": {
      "main": [
        [
          {
            "node": "Send Reactivation Message",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send Reactivation Message": {
      "main": [
        [
          {
            "node": "Mark Reactivation Sent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Weekly - Check for Responses": {
      "main": [
        [
          {
            "node": "Get No-Response (7 days)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get No-Response (7 days)": {
      "main": [
        [
          {
            "node": "Send Follow-Up",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send Follow-Up": {
      "main": [
        [
          {
            "node": "Mark Follow-Up Sent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "tags": ["Module", "Reactivation", "Standalone"],
  "updatedAt": "2025-11-22T00:00:00.000Z",
  "versionId": "1",
  "meta": {
    "module": {
      "name": "Customer Reactivation System",
      "price": "$350",
      "installTime": "25 minutes",
      "benefit": "Bring back 20-30% of lost customers automatically",
      "requirements": ["Twilio", "Airtable with Last Visit tracking"],
      "compatible": "Standalone or combines with other modules",
      "note": "Includes 2-touch sequence: initial + 7-day follow-up"
    }
  }
}







